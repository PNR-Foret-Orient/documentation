(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{76:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return u})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return p}));var a=n(2),r=n(6),i=(n(0),n(86)),s=n(85),o={title:"Contenu de l'Atlas",sidebar_label:"Contenu"},u={unversionedId:"atlasContenu",id:"atlasContenu",isDocsHomePage:!1,title:"Contenu de l'Atlas",description:"Cette page concerne le contenu de l'Atlas, c'est-\xe0-dire les images et le texte des pages sur l'Atlas. Pour vous renseigner sur les donn\xe9es naturalistes, merci de vous rendre sur la page Donn\xe9es de l'Atlas.",source:"@site/docs/atlasContenu.md",slug:"/atlasContenu",permalink:"/documentation/atlasContenu",editUrl:"https://github.com/PNR-Foret-Orient/documentation/edit/master/docs/atlasContenu.md",version:"current",sidebar_label:"Contenu",sidebar:"sidebar",previous:{title:"GeoNature Atlas",permalink:"/documentation/atlasApercu"},next:{title:"Donn\xe9es de l'Atlas",permalink:"/documentation/atlasDonnees"}},c=[{value:"Gestion du contenu et du th\xe8me",id:"gestion-du-contenu-et-du-th\xe8me",children:[]},{value:"Pages de contenu",id:"pages-de-contenu",children:[{value:"Ajouter une page",id:"ajouter-une-page",children:[]},{value:"Images",id:"images",children:[]}]},{value:"Map",id:"map",children:[]}],l={rightToc:c};function p(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"Cette page concerne le ",Object(i.b)("em",{parentName:"p"},"contenu")," de l'Atlas, c'est-\xe0-dire les images et le texte des pages sur l'Atlas. Pour vous renseigner sur les donn\xe9es naturalistes, merci de vous rendre sur la page ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/documentation/atlasDonnees"}),"Donn\xe9es de l'Atlas"),"."),Object(i.b)("img",{alt:"Capture d'\xe9cran de la pr\xe9sentation de GeoNature-Atlas",src:Object(s.a)("img/docs/geonatureAtlas3.png"),className:"tablet"}),Object(i.b)("p",null,Object(i.b)("em",{parentName:"p"},"La page \xab Pr\xe9sentation de l'Atlas \xbb")),Object(i.b)("h2",{id:"gestion-du-contenu-et-du-th\xe8me"},"Gestion du contenu et du th\xe8me"),Object(i.b)("p",null,"GeoNature-Atlas fournit quelques fichiers HTML, CSS et JS qui peuvent \xeatre modifi\xe9s pour ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/PnX-SI/GeoNature-atlas/blob/master/docs/installation.rst#configuration-de-lapplication"}),"customiser l'application"),". Dans cette installation, ces fichiers se trouvent dans un ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/PNR-Foret-Orient/documentation"}),"d\xe9p\xf4t sur GitHub"),"."),Object(i.b)("p",null,"Pour les modifier, cloner le d\xe9p\xf4t Git sur votre machine en local puis modifier les fichiers comme vous voulez. Ensuite, vous devez les d\xe9poser (\xab push \xbb) sur GitHub."),Object(i.b)("p",null,"Pour effectuer vos changements sur l'Atlas, il faut d'abord vous connecter au serveur avec SSH en tant que ",Object(i.b)("inlineCode",{parentName:"p"},"geonatureadmin"),"."),Object(i.b)("p",null,"Ensuite, lancer les commandes suivantes depuis le chemin ",Object(i.b)("inlineCode",{parentName:"p"},"/home/geonatureadmin/atlas/static/custom")," :"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{}),"git pull\nsudo supervisorctl restart atlas\n")),Object(i.b)("p",null,"La premi\xe8re commande t\xe9l\xe9charge vos modifications, la seconde red\xe9marre le processus pour qu'elles soient appliqu\xe9es."),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"L'apparition des modifications peut prendre quelques minutes. Auquel cas, vider votre cache."))),Object(i.b)("h2",{id:"pages-de-contenu"},"Pages de contenu"),Object(i.b)("p",null,"Les pages de contenu se trouve dans le dossier ",Object(i.b)("inlineCode",{parentName:"p"},"templates/")," du d\xe9p\xf4t. Elles sont principalement \xe9crites en HTML mais elles contiennent quelques balises \xab ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://jinja.palletsprojects.com/en/2.11.x/"}),"Jinja")," \xbb, un moteur de templates."),Object(i.b)("p",null,"Les pages utilisent le framework \xab ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://getbootstrap.com/docs/3.3/"}),"Bootstrap 3")," \xbb pour la partie graphique du site."),Object(i.b)("p",null,"Si besoin, vous pouvez modifier le fichier CSS ",Object(i.b)("inlineCode",{parentName:"p"},"custom.css")," qui se trouve dans la racine du d\xe9p\xf4t."),Object(i.b)("h3",{id:"ajouter-une-page"},"Ajouter une page"),Object(i.b)("p",null,"Vous pouvez ajouter des pages statiques de pr\xe9sentation, en plus des pages fournies par d\xe9faut."),Object(i.b)("p",null,"Pour cela, il faut d'abord cr\xe9er les pages dans le d\xe9p\xf4t et les t\xe9l\xe9charger sur le serveur. Vous devez ensuite modifier le param\xe8tre STATIC_PAGES du fichier ",Object(i.b)("inlineCode",{parentName:"p"},"/home/geonatureadmin/atlas/atlas/configuration.py"),", puis red\xe9marrer le service ",Object(i.b)("inlineCode",{parentName:"p"},"atlas"),"."),Object(i.b)("h3",{id:"images"},"Images"),Object(i.b)("p",null,"Vous pouvez ajouter des images au d\xe9p\xf4t dans le dossier ",Object(i.b)("inlineCode",{parentName:"p"},"images/"),". Ensuite, vous pouvez employer une balise Jinja pour les utiliser, ex. ",Object(i.b)("inlineCode",{parentName:"p"},"{{url_for('static', filename='custom/images/placeholder.jpg') }}"),"."),Object(i.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Vous devez redimensionner toutes les images avant des les t\xe9l\xe9charger sur le serveur. Sinon, des probl\xe8mes de lenteur peuvent appara\xeetre pour les visiteur\xb7euse\xb7s de l'Atlas."))),Object(i.b)("p",null,"Pour les images des esp\xe8ces, vous devez les ajouter \xe0 TaxHub directement."),Object(i.b)("h2",{id:"map"},"Map"),Object(i.b)("p",null,"Il existe une page \xab Carte \xbb avec une carte du parc reprenant les contours administratifs et les zones \xe9cologiques sensibles. Cette carte est statique, c'est-\xe0-dire qu'elle est ind\xe9pendante de GeoNature."),Object(i.b)("p",null,"La carte a \xe9t\xe9 g\xe9n\xe9r\xe9e par l'outil ",Object(i.b)("inlineCode",{parentName:"p"},"qgis2web"),". Pour la modifier, utiliser cet outil et mettre les nouveaux fichiers dans le dossier ",Object(i.b)("inlineCode",{parentName:"p"},"templates/map/"),". Si vous utilisez une couche d'OpenStreetMap, vous pourriez besoin de modifier le fichier ",Object(i.b)("inlineCode",{parentName:"p"},"index.html")," pour que les tuiles soient t\xe9l\xe9charg\xe9es via HTTPS plut\xf4t que HTTP :"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript",metastring:'title="templates/map/index.html"',title:'"templates/map/index.html"'}),"var layer_OSMStandard_0 = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png'\u2026\n")),Object(i.b)("img",{alt:"Capture d'\xe9cran de l'outil qgis2web",src:Object(s.a)("img/docs/geonatureAtlas5.png"),className:"tablet"}),Object(i.b)("p",null,Object(i.b)("em",{parentName:"p"},"Une capture d'\xe9cran de l'outil ",Object(i.b)("inlineCode",{parentName:"em"},"qgis2web"),".")))}p.isMDXComponent=!0},84:function(e,t,n){"use strict";var a=n(0),r=n(20);t.a=function(){var e=Object(a.useContext)(r.a);if(null===e)throw new Error("Docusaurus context not provided");return e}},85:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));var a=n(84),r=n(87);function i(){var e=Object(a.a)().siteConfig,t=(e=void 0===e?{}:e).baseUrl,n=void 0===t?"/":t,i=e.url;return{withBaseUrl:function(e,t){return function(e,t,n,a){var i=void 0===a?{}:a,s=i.forcePrependBaseUrl,o=void 0!==s&&s,u=i.absolute,c=void 0!==u&&u;if(!n)return n;if(n.startsWith("#"))return n;if(Object(r.b)(n))return n;if(o)return t+n;var l=n.startsWith(t)?n:t+n.replace(/^\//,"");return c?e+l:l}(i,n,e,t)}}}function s(e,t){return void 0===t&&(t={}),(0,i().withBaseUrl)(e,t)}},86:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=r.a.createContext({}),l=function(e){var t=r.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=l(e.components);return r.a.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},b=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,c=u(e,["components","mdxType","originalType","parentName"]),p=l(n),b=a,m=p["".concat(s,".").concat(b)]||p[b]||d[b]||i;return n?r.a.createElement(m,o(o({ref:t},c),{},{components:n})):r.a.createElement(m,o({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,s=new Array(i);s[0]=b;var o={};for(var u in t)hasOwnProperty.call(t,u)&&(o[u]=t[u]);o.originalType=e,o.mdxType="string"==typeof e?e:a,s[1]=o;for(var c=2;c<i;c++)s[c]=n[c];return r.a.createElement.apply(null,s)}return r.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"},87:function(e,t,n){"use strict";function a(e){return!0===/^(\w*:|\/\/)/.test(e)}function r(e){return void 0!==e&&!a(e)}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}))}}]);