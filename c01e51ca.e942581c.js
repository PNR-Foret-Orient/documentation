(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{78:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return u})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return p}));var a=n(2),r=n(6),s=(n(0),n(85)),i=n(87),o={title:"Contenu de l'Atlas",sidebar_label:"Contenu"},u={unversionedId:"atlasContenu",id:"atlasContenu",isDocsHomePage:!1,title:"Contenu de l'Atlas",description:"Cette page concerne le contenu de l'Atlas, c'est-\xe0-dire les images et le texte des pages sur l'Atlas. Pour vous renseigner sur les donn\xe9es naturalistes, merci de vous rendre sur la page Donn\xe9es de l'Atlas.",source:"@site/docs/atlasContenu.md",slug:"/atlasContenu",permalink:"/documentation/atlasContenu",editUrl:"https://github.com/PNR-Foret-Orient/documentation/edit/master/docs/atlasContenu.md",version:"current",sidebar_label:"Contenu",sidebar:"sidebar",previous:{title:"GeoNature Atlas",permalink:"/documentation/atlasApercu"},next:{title:"Donn\xe9es de l'Atlas",permalink:"/documentation/atlasDonnees"}},c=[{value:"Gestion du contenu et du th\xe8me",id:"gestion-du-contenu-et-du-th\xe8me",children:[]},{value:"Pages de contenu",id:"pages-de-contenu",children:[{value:"Ajouter une page",id:"ajouter-une-page",children:[]},{value:"Images",id:"images",children:[]}]},{value:"Map",id:"map",children:[]}],l={rightToc:c};function p(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(s.b)("wrapper",Object(a.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(s.b)("p",null,"Cette page concerne le ",Object(s.b)("em",{parentName:"p"},"contenu")," de l'Atlas, c'est-\xe0-dire les images et le texte des pages sur l'Atlas. Pour vous renseigner sur les donn\xe9es naturalistes, merci de vous rendre sur la page ",Object(s.b)("a",Object(a.a)({parentName:"p"},{href:"/documentation/atlasDonnees"}),"Donn\xe9es de l'Atlas"),"."),Object(s.b)("img",{alt:"Capture d'\xe9cran de la pr\xe9sentation de GeoNature-Atlas",src:Object(i.a)("img/docs/geonatureAtlas3.png"),className:"tablet"}),Object(s.b)("p",null,Object(s.b)("em",{parentName:"p"},"La page \xab Presentation de l'Atlas \xbb")),Object(s.b)("h2",{id:"gestion-du-contenu-et-du-th\xe8me"},"Gestion du contenu et du th\xe8me"),Object(s.b)("p",null,"GeoNature-Atlas fournit quelques fichiers HTML, CSS et JS qui peuvent \xeatre modifi\xe9s pour ",Object(s.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/PnX-SI/GeoNature-atlas/blob/master/docs/installation.rst#configuration-de-lapplication"}),"customiser l'application"),". Dans cette installation, ces fichiers se trouvent dans un ",Object(s.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/PNR-Foret-Orient/documentation"}),"d\xe9p\xf4t sur GitHub"),"."),Object(s.b)("p",null,"Pour les modifier, cloner le d\xe9p\xf4t Git sur votre machine locale puis modifier les fichiers comme vous voulez. Ensuite, vous devez les pousser (\xab push \xbb) vers GitHub."),Object(s.b)("p",null,"Pour effectuer vos changements sur l'Atlas, il faut d'abord vous connecter au serveur avec SSH en tant que \xab geonatureadmin \xbb."),Object(s.b)("p",null,"Ensuite, lancer les commandes suivantes depuis le chemin ",Object(s.b)("inlineCode",{parentName:"p"},"/home/geonatureadmin/atlas/static/custom")," :"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{}),"git pull\nsudo supervisorctl restart atlas\n")),Object(s.b)("p",null,"La premi\xe8re commande t\xe9l\xe9chargera vos modifications, la seconde red\xe9marrera le processus 'Atlas' pour qu'elles soient appliqu\xe9es."),Object(s.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(s.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(s.b)("h5",{parentName:"div"},Object(s.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(s.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(s.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(s.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(s.b)("p",{parentName:"div"},"L'apparition des modifications peut prendre quelques minutes. Vous pourriez avoir besoin de vider votre cache."))),Object(s.b)("h2",{id:"pages-de-contenu"},"Pages de contenu"),Object(s.b)("p",null,"Les pages de contenu se trouve dans le dossier ",Object(s.b)("inlineCode",{parentName:"p"},"templates/")," du d\xe9p\xf4t. Elles sont principalement \xe9crits en HTML mais elles contiennent quelques balises \xab ",Object(s.b)("a",Object(a.a)({parentName:"p"},{href:"https://jinja.palletsprojects.com/en/2.11.x/"}),"Jinja")," \xbb, un moteur de templates."),Object(s.b)("p",null,"Les pages utilisent le framework \xab ",Object(s.b)("a",Object(a.a)({parentName:"p"},{href:"https://getbootstrap.com/docs/3.3/"}),"Bootstrap 3")," \xbb pour assister avec la pr\xe9sentation graphique du site."),Object(s.b)("p",null,"Si besoin, vous pouvez modifier le fichier CSS ",Object(s.b)("inlineCode",{parentName:"p"},"custom.css")," qui se trouve dans la racine du d\xe9p\xf4t."),Object(s.b)("h3",{id:"ajouter-une-page"},"Ajouter une page"),Object(s.b)("p",null,"Vous pouvez ajouter des pages statiques de pr\xe9sentation, en plus des pages fournies par d\xe9faut."),Object(s.b)("p",null,"Pour cela, il faut d'abord cr\xe9er les pages dans le d\xe9p\xf4t et les t\xe9l\xe9charger sur le serveur. Vous devez ensuite modifier le param\xe8tre STATIC_PAGES du fichier ",Object(s.b)("inlineCode",{parentName:"p"},"/home/geonatureadmin/atlas/atlas/configuration.py"),", puis red\xe9marrer le service Atlas."),Object(s.b)("h3",{id:"images"},"Images"),Object(s.b)("p",null,"Vous pouvez ajouter des images au d\xe9p\xf4t dans le dossier ",Object(s.b)("inlineCode",{parentName:"p"},"images/"),". Ensuite, vous pouvez employer une balise Jinja pour les utiliser, ex. ",Object(s.b)("inlineCode",{parentName:"p"},"{{url_for('static', filename='custom/images/placeholder.jpg') }}"),"."),Object(s.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(s.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(s.b)("h5",{parentName:"div"},Object(s.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(s.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(s.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(s.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(s.b)("p",{parentName:"div"},"Vous devez redimensionner toutes les images avant des les t\xe9l\xe9charger sur le serveur. Sinon, \xe7a peut cr\xe9er des probl\xe8mes de vitesse pour les visiteur\xb7euse\xb7s de l'Atlas."))),Object(s.b)("p",null,"Pour les images des esp\xe8ces, vous devez les ajouter \xe0 TaxHub directement."),Object(s.b)("h2",{id:"map"},"Map"),Object(s.b)("p",null,"Il existe une page \xab Carte \xbb avec une carte du parc et les zones diff\xe9rentes que l'on y trouve. Cette carte est statique, c'est-\xe0-dire que \xe7a ne montre pas des donn\xe9es dynamique de GeoNature."),Object(s.b)("p",null,"La carte a \xe9t\xe9 g\xe9n\xe9r\xe9e par l'outil ",Object(s.b)("inlineCode",{parentName:"p"},"qgis2web"),". Pour la reg\xe9n\xe9rez, utiliser cet outil et mettre l'output dans le dossier ",Object(s.b)("inlineCode",{parentName:"p"},"templates/map/"),". Si vous utilisez une couche d'OpenStreetMap, vous pourriez besoin de modifier le fichier ",Object(s.b)("inlineCode",{parentName:"p"},"index.html")," pour que les tuiles sont t\xe9l\xe9charg\xe9s par HTTPS plut\xf4t que HTTP :"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript",metastring:'title="templates/map/index.html"',title:'"templates/map/index.html"'}),"var layer_OSMStandard_0 = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png'\u2026\n")),Object(s.b)("img",{alt:"Capture d'\xe9cran de l'outil qgis2web",src:Object(i.a)("img/docs/geonatureAtlas5.png"),className:"tablet"}),Object(s.b)("p",null,Object(s.b)("em",{parentName:"p"},"Une capture d'\xe9cran de l'outil ",Object(s.b)("inlineCode",{parentName:"em"},"qgis2web"),".")))}p.isMDXComponent=!0},85:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=r.a.createContext({}),l=function(e){var t=r.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=l(e.components);return r.a.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},b=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,s=e.originalType,i=e.parentName,c=u(e,["components","mdxType","originalType","parentName"]),p=l(n),b=a,m=p["".concat(i,".").concat(b)]||p[b]||d[b]||s;return n?r.a.createElement(m,o(o({ref:t},c),{},{components:n})):r.a.createElement(m,o({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var s=n.length,i=new Array(s);i[0]=b;var o={};for(var u in t)hasOwnProperty.call(t,u)&&(o[u]=t[u]);o.originalType=e,o.mdxType="string"==typeof e?e:a,i[1]=o;for(var c=2;c<s;c++)i[c]=n[c];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"},86:function(e,t,n){"use strict";var a=n(0),r=n(20);t.a=function(){var e=Object(a.useContext)(r.a);if(null===e)throw new Error("Docusaurus context not provided");return e}},87:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return i}));var a=n(86),r=n(88);function s(){var e=Object(a.a)().siteConfig,t=(e=void 0===e?{}:e).baseUrl,n=void 0===t?"/":t,s=e.url;return{withBaseUrl:function(e,t){return function(e,t,n,a){var s=void 0===a?{}:a,i=s.forcePrependBaseUrl,o=void 0!==i&&i,u=s.absolute,c=void 0!==u&&u;if(!n)return n;if(n.startsWith("#"))return n;if(Object(r.b)(n))return n;if(o)return t+n;var l=!n.startsWith(t)?t+n.replace(/^\//,""):n;return c?e+l:l}(s,n,e,t)}}}function i(e,t){return void 0===t&&(t={}),(0,s().withBaseUrl)(e,t)}},88:function(e,t,n){"use strict";function a(e){return!0===/^(\w*:|\/\/)/.test(e)}function r(e){return void 0!==e&&!a(e)}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}))}}]);